<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IPL Live Auction</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<link rel="stylesheet" href="style.css">
</head>

<body>

<section id="landing" class="screen">
  <div class="landing-card glass">
    <div style="font-size:3rem; margin-bottom:10px;">ğŸ</div>
    <h1 class="title">IPL AUCTION</h1>
    <h1 class="title" style="font-size:1.5rem; opacity:0.8; margin-top:5px;">LIVE SIMULATOR</h1>

    <p class="subtitle">
      Real-time bidding. Strategy. Pressure. <br>
      Compete against friends to build the ultimate 11.
    </p>

    <div class="features">
      <span>âš¡ Live Sockets</span>
      <span>ğŸ’° Purse Logic</span>
      <span>ğŸ† Leaderboards</span>
    </div>

    <button id="enterBtn" class="primary-btn" style="width:100%;">
      ENTER ARENA
    </button>
  </div>
</section>


<section id="auth" class="screen hidden">
  <div class="auth-wrapper">
    <div class="glass auth-card">
      <h2>Join the Auction</h2>

      <input id="username" placeholder="Your display name">

      <button id="continueBtn" class="primary-btn">
        Continue
      </button>

      <div id="roomOptions" class="room-options hidden">
        <button id="createBtn" class="secondary-btn">
          Create Room (Host)
        </button>

        <div class="divider">OR</div>

        <input id="code" placeholder="Enter Room Code">

        <button id="joinBtn" class="secondary-btn">
          Join Room
        </button>
      </div>
    </div>
  </div>
</section>


<section id="waiting" class="screen hidden">
  <div class="glass waiting-card">
    <h2>â³ Waiting</h2>
    <p>Waiting for host to lock rules / start auction</p>
  </div>
</section>


<div id="rulesScreen" class="rules-overlay hidden">
  <div class="overlay-card">
    
    <h2>âš™ï¸ Tournament Setup</h2>

    <div class="rules-scroll-area">
        
        <div class="rules-section">
            <h4>ğŸ’° General Settings</h4>
            <div class="rule-row">
                <label>Total Purse (Cr)</label>
                <input id="purse" type="number" value="120">
            </div>
            <div class="rule-row">
                <label>Max Squad Size</label>
                <input id="maxPlayers" type="number" value="18">
            </div>
            <div class="rule-row">
                <label>Max Foreign Players</label>
                <input id="maxForeign" type="number" value="6">
            </div>
        </div>

        <div class="rules-section">
            <h4>ğŸ§¢ Playing XI Requirements</h4>
            <div class="rule-row">
                <label>Min Batsmen</label>
                <input id="minBat" type="number" value="3">
            </div>
            <div class="rule-row">
                <label>Min Bowlers</label>
                <input id="minBowl" type="number" value="3">
            </div>
            <div class="rule-row">
                <label>Min Wicket Keepers</label>
                <input id="minWK" type="number" value="1">
            </div>
            <div class="rule-row">
                <label>Min All-Rounders</label>
                <input id="minAll" type="number" value="1">
            </div>
            <div class="rule-row">
                <label>Min Spinners</label>
                <input id="minSpin" type="number" value="1">
            </div>
             <div class="rule-row">
                <label>Min Foreign (in XI)</label>
                <input id="minForeignXI" type="number" value="0">
            </div>
        </div>

    </div>

    <div class="rules-footer">
        <button id="saveRules" class="primary-btn" style="width:100%;">
          ğŸ”’ Lock Rules & Start
        </button>
        <div id="rulesLockedMsg" class="hidden" style="text-align:center; color:#22c55e; margin-top:10px; font-weight:bold;">
            âœ… Rules Locked! Starting...
        </div>
    </div>

  </div>
</div>


<div id="teamPopup" class="rules-overlay hidden">
  <div class="glass rules-card">
    <h3>ğŸ‘• Select Your Team</h3>
    <p class="rules-sub">Choose one team to continue</p>

    <div id="teamSelectList" class="team-list"></div>

    <div id="teamPickedMsg" class="rules-success hidden">
      âœ… Team selected
    </div>
  </div>
</div>


<section id="auctionUI" class="screen hidden">

  <header class="topbar">
    <div class="top-left" style="display:flex; align-items:center;">
      <span class="brand">âš¡ IPL AUCTION LIVE</span>
      
      <div id="roomCodeBar" class="hidden" style="margin-left:20px; font-family:monospace; background:rgba(255,255,255,0.1); padding:4px 8px; border-radius:4px;">
        CODE: <span id="roomCodeText" style="color:var(--primary); font-weight:bold;"></span>
      </div>
    </div>
    
    <div class="top-right" style="display:flex; align-items:center;">
      
      <button onclick="showRules()" class="secondary-btn" style="padding:6px 12px; font-size:0.8rem; margin-right: 8px;">
        ğŸ“œ Rules
      </button>
      
      <span id="adminControls" class="admin-mini hidden" style="display:flex; align-items:center;">
          
          <span style="border-left:1px solid var(--border); margin:0 8px; height:20px; display:inline-block;"></span>
          
          <button id="startBtn" class="primary-btn" style="padding:6px 12px; font-size:0.8rem;">START</button>
          <button id="togglePauseBtn" class="secondary-btn" style="padding:6px;">â¸</button>
          <button id="skipBtn" class="secondary-btn" style="padding:6px;">â­</button>
          <button id="skipSetBtn" class="secondary-btn" style="color: #fca5a5; padding:6px;">â© Set</button>
          <button onclick="admin('end')" class="secondary-btn" style="color:var(--accent); padding:6px;">â›” End</button>
      </span>

    </div>
  </header>

  <div class="auction-wrapper">

    <div class="panel glass">
      <h3>ğŸ“¢ Notifications & Log</h3>
      <div id="log" class="scroll"></div>
      
      <div style="margin-top:15px; border-top:1px solid var(--border); padding-top:15px;">
        <select id="squadSelect" onchange="showSelectedSquad()" style="width:100%; padding:10px; background:#1e293b; color:white; border:1px solid var(--border); border-radius:6px;">
          <option value="">ğŸ§¢ View Team Squads</option>
        </select>
        <button onclick="viewSet()" class="secondary-btn" style="width:100%; margin-top:10px;">ğŸ“¦ View Upcoming Sets</button>
      </div>
    </div>

    <div class="auction-center">
      
      <div id="teamNotice" class="notice" style="margin-bottom:15px; color:var(--gold); font-weight:bold; text-transform:uppercase; letter-spacing:1px;"></div>

      <div class="auction glass" id="auctionCard">
        
        <div class="auction-header-role">
          <span id="playerMeta">WAITING FOR AUCTION...</span>
        </div>

        <div class="auction-body">
    
          <div id="playerInfoBox" style="position: relative;"> 
              
              <div id="resultOverlay" class="result-overlay hidden">
                  <div class="stamp-container">
                      <div id="stampTitle" class="stamp-title">SOLD</div>
                      <div id="stampDetail" class="stamp-detail">TO CSK</div>
                  </div>
              </div>

              <div id="playerName">---</div>
              <div style="margin-top:5px; font-size:0.8rem; opacity:0.6;">CURRENT PLAYER</div>
          </div>

          <div class="price-container">
              <div style="text-align:left;">
                  <div style="font-size:0.7rem; color:var(--text-muted); margin-bottom:2px;">CURRENT BID</div>
                  <div id="bid" style="line-height:1;">â‚¹0.00 Cr</div>
              </div>

              <div id="currentBidder" class="bidder-badge hidden">
                 <span class="dot"></span> <span id="bidderName">CSK</span>
              </div>

              <div style="text-align:right;">
                  <div id="timer">10</div>
              </div>
          </div>

          <div class="card-padding-area">
              <button id="bidBtn">PLACE BID</button>
          </div>

        </div>

      </div>
    </div>

    <div class="panel glass">
      <h3>ğŸ’¬ Team Chat</h3>
      <div id="chat" class="scroll"></div>
      <div class="chat-box">
        <input id="msg" placeholder="Type..." style="background:#1e293b;">
        <button onclick="sendChat()">â¤</button>
      </div>
    </div>

  </div>

  <div id="squadsBoard" class="squads-board hidden"></div>

</section>


<div id="soldOverlay" class="hidden">
  <div class="sold-box glass">
    <div class="hammer">ğŸ”¨</div>
    <div id="soldText" class="sold-text">
      SOLD
    </div>
  </div>
</div>


<section id="playingXI" class="screen hidden">
  <div class="glass xi-card" style="max-width: 900px; margin: 20px auto; padding: 20px;">
    
    <h2 style="text-align:center; margin-bottom: 20px;">ğŸ§¢ Select Your Playing XI</h2>
    <p style="text-align:center; color:#ccc; margin-bottom: 20px;">
      Select exactly 11 players. Rules: Max 4 Foreigners.
    </p>
    <div style="padding: 20px;">
      
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
        
        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ’° Total Purse</div>
          <div style="font-size:1.2rem; font-weight:bold;">â‚¹<span id="viewPurse">---</span> Cr</div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ‘¥ Min Squad Size</div>
          <div style="font-size:1.2rem; font-weight:bold;"><span id="viewSquadSize">---</span></div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">âœˆï¸ Max Foreign</div>
          <div style="font-size:1.2rem; font-weight:bold;"><span id="viewForeign">---</span></div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ RTM Cards</div>
          <div style="font-size:1.2rem; font-weight:bold;">0</div>
        </div>

      </div>

    <div id="xiPreviewBox" class="xi-preview-container">
        <h3>Your Selected XI</h3>
        <div id="xiPreviewContent">
            <p style="color:#666; font-style:italic;">No players selected yet...</p>
        </div>
    </div>

    <button id="submitXIBtn" onclick="submitXI()" class="primary-btn" style="width:100%; margin: 20px 0; font-size: 1.2rem;">
        Submit XI (0/11)
    </button>

    <h3 style="border-bottom: 1px solid #444; padding-bottom: 10px; margin-top: 30px;">
        ğŸ‘‡ Click Players to Select
    </h3>
    
    <div id="mySquadList"></div>

    <div id="xiStatus"></div>

    <div id="leaderboardBox" class="leaderboard-box"></div>

  </div>
</section>


<section id="leaderboard" class="screen hidden">
  <header class="topbar glass">
    <span class="brand">ğŸ† Tournament Leaderboard</span>
  </header>

  <div class="container" style="padding-top:80px;">
    <div class="glass" style="overflow-x:auto;">
        <table class="leaderboard-table" style="width:100%; border-collapse:collapse; color:#fff;">
          <thead>
            <tr style="background:#333; text-align:left;">
              <th style="padding:12px;">Rank</th>
              <th style="padding:12px;">Team</th>
              <th style="padding:12px;">Rating</th>
              <th style="padding:12px;">Status</th>
              <th style="padding:12px;">Purse Left</th>
            </tr>
          </thead>
          <tbody id="leaderboardBody">
            </tbody>
        </table>
    </div>
    
    <button onclick="location.reload()" class="primary-btn" style="margin-top:20px;">
        ğŸ”„ Play Again
    </button>
  </div>
</section>


<div id="viewRulesOverlay" class="rules-overlay hidden" onclick="closeRules(event)">
  <div class="glass rules-card" style="max-width: 400px; width: 90%; padding: 0;">
    
    <div style="padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); display:flex; justify-content:space-between; align-items:center;">
      <h3 style="margin:0; color:var(--gold);">ğŸ“œ Tournament Rules</h3>
      <button onclick="document.getElementById('viewRulesOverlay').classList.add('hidden')" style="background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer;">&times;</button>
    </div>

    <div style="padding: 20px;">
      
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
        
        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ’° Total Purse</div>
          <div style="font-size:1.2rem; font-weight:bold;">â‚¹<span id="pop_viewPurse">---</span> Cr</div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ‘¥ Min Squad Size</div>
          <div style="font-size:1.2rem; font-weight:bold;"><span id="pop_viewSquadSize">---</span></div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">âœˆï¸ Max Foreign</div>
          <div style="font-size:1.2rem; font-weight:bold;"><span id="pop_viewForeign">---</span></div>
        </div>

        <div class="rule-box" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
          <div style="font-size:0.8rem; color:#aaa;">ğŸ RTM Cards</div>
          <div style="font-size:1.2rem; font-weight:bold;">0</div>
        </div>

      </div>

      <h4 style="margin: 0 0 10px 0; color:var(--primary); font-size:0.9rem; text-transform:uppercase;">Playing XI Requirements</h4>
      <ul style="list-style:none; padding:0; margin:0; font-size:0.9rem; color:#ccc; line-height: 1.6;">
        <li>ğŸ Min Batsmen: <span id="pop_viewBat" style="color:#fff; font-weight:bold;">-</span></li>
        <li>ğŸ¥ Min Bowlers: <span id="pop_viewBowl" style="color:#fff; font-weight:bold;">-</span></li>
        <li>ğŸ¥ Spinners in Bowlers: <span id="pop_viewSpin" style="color:#fff; font-weight:bold;">-</span></li>
        <li>ğŸ§¤ Min Wicket Keepers: <span id="pop_viewWK" style="color:#fff; font-weight:bold;">-</span></li>
        <li>ğŸŒŸ Min All-Rounders: <span id="pop_viewAR" style="color:#fff; font-weight:bold;">-</span></li>
      </ul>

    </div>

    <div style="padding: 15px; text-align:center; border-top: 1px solid rgba(255,255,255,0.1);">
      <button onclick="document.getElementById('viewRulesOverlay').classList.add('hidden')" class="secondary-btn" style="width:100%;">Close</button>
    </div>

  </div>
</div>


<script src="/socket.io/socket.io.js"></script>
<script src="client.js"></script>

</body>
</html>


