<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IPL Live Auction</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<!-- Main CSS -->
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ================================================= -->
<!-- ================= LANDING PAGE ================= -->
<!-- ================================================= -->
<section id="landing" class="screen">
  <div class="landing-card glass">
    <div style="font-size:3rem; margin-bottom:10px;">üèè</div>
    <h1 class="title">IPL AUCTION</h1>
    <h1 class="title" style="font-size:1.5rem; opacity:0.8; margin-top:5px;">LIVE SIMULATOR</h1>

    <p class="subtitle">
      Real-time bidding. Strategy. Pressure. <br>
      Compete against friends to build the ultimate 11.
    </p>

    <div class="features">
      <span>‚ö° Live Sockets</span>
      <span>üí∞ Purse Logic</span>
      <span>üèÜ Leaderboards</span>
    </div>

    <button id="enterBtn" class="primary-btn" style="width:100%;">
      ENTER ARENA
    </button>
  </div>
</section>


<!-- ================================================= -->
<!-- ================= AUTH PAGE ==================== -->
<!-- ================================================= -->
<section id="auth" class="screen hidden">

  <div class="auth-wrapper">

    <div class="glass auth-card">
      <h2>Join the Auction</h2>

      <input id="username" placeholder="Your display name">

      <button id="continueBtn" class="primary-btn">
        Continue
      </button>

      <div id="roomOptions" class="room-options hidden">

        <button id="createBtn" class="secondary-btn">
          Create Room (Host)
        </button>

        <div class="divider">OR</div>

        <input id="code" placeholder="Enter Room Code">

        <button id="joinBtn" class="secondary-btn">
          Join Room
        </button>

      </div>
    </div>

  </div>

</section>

<!-- ================= AUCTION RULES (ADMIN ONLY) ================= -->
<!-- ================= WAITING SCREEN ================= -->
<section id="waiting" class="screen hidden">
  <div class="glass waiting-card">
    <h2>‚è≥ Waiting</h2>
    <p>Waiting for host to lock rules / start auction</p>
  </div>
</section>

<!-- ================= RULES POPUP ================= -->
<div id="rulesScreen" class="rules-overlay hidden">

  <div class="glass rules-card">

    <h3 class="rules-title">‚öôÔ∏è Auction Rules</h3>
    <p class="rules-sub">Set rules once before starting the auction</p>

    <div class="rule">
      <label for="maxPlayers">Max Squad Size</label>
      <input id="maxPlayers" type="number" value="18" min="11">
    </div>

    <div class="rule">
      <label for="maxForeign">Max Foreign Players</label>
      <input id="maxForeign" type="number" value="6" min="0">
    </div>
     <h4 class="rules-sub">üß¢ Minimum Playing Roles</h4>

    <div class="rule">
      <label for="minBat">Min Batsmen</label>
      <input id="minBat" type="number" value="3" min="0">
    </div>

    <div class="rule">
      <label for="minAll">Min All-Rounders</label>
      <input id="minAll" type="number" value="1" min="0">
    </div>

    <div class="rule">
      <label for="minBowl">Min Bowlers</label>
      <input id="minBowl" type="number" value="3" min="0">
    </div>

    <div class="rule">
      <label for="minSpin">Min Spinners</label>
      <input id="minSpin" type="number" value="1" min="0">
    </div>

    <div class="rule">
      <label for="minWK">Min Wicket-Keepers</label>
      <input id="minWK" type="number" value="1" min="0">
    </div>
    <div class="rule">
      <label>Min Foreigners (Playing XI)</label>
      <input id="minForeignXI" type="number" value="0" min="0">
    </div>

    <div class="rule">
      <label for="purse">Total Purse (Cr)</label>
      <input id="purse" type="number" value="120" min="10">
    </div>

    <button id="saveRules" class="primary-btn">
      üîí Lock Rules
    </button>

    <div id="rulesLockedMsg" class="rules-success hidden">
      ‚úÖ Rules locked successfully
    </div>

  </div>

</div>

<!-- ================= TEAM SELECT POPUP ================= -->
<div id="teamPopup" class="rules-overlay hidden">

  <div class="glass rules-card">
    <h3>üëï Select Your Team</h3>
    <p class="rules-sub">Choose one team to continue</p>

    <div id="teamSelectList" class="team-list"></div>

    <div id="teamPickedMsg" class="rules-success hidden">
      ‚úÖ Team selected
    </div>
  </div>

</div>


<!-- ================================================= -->
<!-- ================= AUCTION PAGE ================= -->
<!-- ================================================= -->
<section id="auctionUI" class="screen hidden">

  <header class="topbar">
    <div class="top-left" style="display:flex; align-items:center;">
      <span class="brand">‚ö° IPL AUCTION LIVE</span>
      <div id="roomCodeBar" class="hidden" style="margin-left:20px; font-family:monospace; background:rgba(255,255,255,0.1); padding:4px 8px; border-radius:4px;">
        CODE: <span id="roomCodeText" style="color:var(--primary); font-weight:bold;"></span>
      </div>
    </div>
    
    <div class="top-right admin-mini" id="adminControls">
      <button onclick="toggleRules()" class="secondary-btn" style="padding:6px 12px; font-size:0.8rem;">üìú Rules</button>
      
      <span style="border-left:1px solid var(--border); margin:0 10px; height:20px; display:inline-block; vertical-align:middle;"></span>
      
      <button id="startBtn" class="primary-btn" style="padding:6px 12px; font-size:0.8rem;">START</button>
      <button id="togglePauseBtn" class="secondary-btn" style="padding:6px;">‚è∏</button>
      <button id="skipBtn" class="secondary-btn" style="padding:6px;">‚è≠</button>
      <button id="skipSetBtn" class="secondary-btn" style="color: #fca5a5; padding:6px;">‚è© Set</button>
      <button onclick="admin('end')" class="secondary-btn" style="color:var(--accent); padding:6px;">‚õî End</button>
    </div>
  </header>

  <div class="auction-wrapper">

    <div class="panel glass">
      <h3>üì¢ Notifications & Log</h3>
      <div id="log" class="scroll"></div>
      
      <div style="margin-top:15px; border-top:1px solid var(--border); padding-top:15px;">
        <select id="squadSelect" onchange="showSelectedSquad()" style="width:100%; padding:10px; background:#1e293b; color:white; border:1px solid var(--border); border-radius:6px;">
          <option value="">üß¢ View Team Squads</option>
        </select>
        <button onclick="viewSet()" class="secondary-btn" style="width:100%; margin-top:10px;">üì¶ View Upcoming Sets</button>
      </div>
    </div>

    <div class="auction-center">
      
      <div id="teamNotice" class="notice" style="margin-bottom:15px; color:var(--gold); font-weight:bold; text-transform:uppercase; letter-spacing:1px;"></div>

      <div class="auction glass" id="auctionCard">
        
        <div class="auction-header-role">
          <span id="playerMeta">WAITING FOR AUCTION...</span>
        </div>

        <div class="auction-body">
          
          <div id="playerInfoBox">
            <div id="playerName">---</div>
            <div style="margin-top:5px; font-size:0.8rem; opacity:0.6;">CURRENT PLAYER</div>
          </div>

          <div class="price-container">
            <div style="text-align:left;">
              <div style="font-size:0.8rem; color:var(--text-muted); margin-bottom:4px;">CURRENT BID</div>
              <div id="bid">‚Çπ0.00 Cr</div>
            </div>
            <div style="text-align:right;">
              <div id="timer">10</div>
            </div>
          </div>

          <div class="card-padding-area">
            <button id="bidBtn">PLACE BID</button>
            <div id="auctionResult"></div>
          </div>

        </div>
      </div>
    </div>

    <div class="panel glass">
      <h3>üí¨ Team Chat</h3>
      <div id="chat" class="scroll"></div>
      <div class="chat-box">
        <input id="msg" placeholder="Type..." style="background:#1e293b;">
        <button onclick="sendChat()">‚û§</button>
      </div>
    </div>

  </div>

  <div id="squadsBoard" class="squads-board hidden"></div>

</section>

<!-- ================================================= -->
<!-- ================= SOLD / UNSOLD OVERLAY ========= -->
<!-- ================================================= -->
<div id="soldOverlay" class="hidden">

  <div class="sold-box glass">

    <!-- Hammer icon animated via CSS -->
    <div class="hammer">üî®</div>

    <!-- Text swapped by JS -->
    <div id="soldText" class="sold-text">
      SOLD
    </div>

  </div>

</div>

<!-- ================================================= -->
<!-- ================= PLAYING XI PAGE =============== -->
<!-- ================================================= -->

<section id="playingXI" class="screen hidden">

  <div class="glass xi-card" style="max-width: 900px; margin: 20px auto; padding: 20px;">
    
    <h2 style="text-align:center; margin-bottom: 20px;">üß¢ Select Your Playing XI</h2>
    <p style="text-align:center; color:#ccc; margin-bottom: 20px;">
      Select exactly 11 players. Rules: Max 4 Foreigners.
    </p>

    <div id="xiPreviewBox" class="xi-preview-container">
        <h3>Your Selected XI</h3>
        <div id="xiPreviewContent">
            <p style="color:#666; font-style:italic;">No players selected yet...</p>
        </div>
    </div>

    <button id="submitXIBtn" onclick="submitXI()" class="primary-btn" style="width:100%; margin: 20px 0; font-size: 1.2rem;">
        Submit XI (0/11)
    </button>

    <h3 style="border-bottom: 1px solid #444; padding-bottom: 10px; margin-top: 30px;">
        üëá Click Players to Select
    </h3>
    
    <div id="mySquadList"></div>

    <div id="xiStatus"></div>

    <div id="leaderboardBox" class="leaderboard-box"></div>

  </div>

</section>


<!-- ================================================= -->
<!-- ================= LEADERBOARD ================== -->
<!-- ================================================= -->
<section id="leaderboard" class="screen hidden">

  <header class="topbar glass">
    <span class="brand">üèÜ Tournament Leaderboard</span>
  </header>

  <div class="container" style="padding-top:80px;">
    <div class="glass" style="overflow-x:auto;">
        <table class="leaderboard-table" style="width:100%; border-collapse:collapse; color:#fff;">
          <thead>
            <tr style="background:#333; text-align:left;">
              <th style="padding:12px;">Rank</th>
              <th style="padding:12px;">Team</th>
              <th style="padding:12px;">Rating</th>
              <th style="padding:12px;">Status</th>
              <th style="padding:12px;">Purse Left</th>
            </tr>
          </thead>
          <tbody id="leaderboardBody">
            </tbody>
        </table>
    </div>
    
    <button onclick="location.reload()" class="primary-btn" style="margin-top:20px;">
        üîÑ Play Again
    </button>
  </div>

</section>


<!-- ================================================= -->
<!-- ================= SCRIPTS ====================== -->
<!-- ================================================= -->
<script src="/socket.io/socket.io.js"></script>
<script src="client.js"></script>

</body>
</html>
